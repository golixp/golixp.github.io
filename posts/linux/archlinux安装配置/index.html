<!doctype html><html lang=zh-cn dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=theme-color><title>ArchLinux 安装配置 &#183; Lixp的Blog</title><meta name=title content="ArchLinux 安装配置 &#183; Lixp的Blog"><link rel=canonical href=https://golixp.github.io/posts/linux/archlinux%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/><meta name=author content="Lixp"><meta property="og:url" content="https://golixp.github.io/posts/linux/archlinux%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"><meta property="og:site_name" content="Lixp的Blog"><meta property="og:title" content="ArchLinux 安装配置"><meta property="og:description" content="安装 # 这里选择 EndeavourOS , 它是一个 Arch Linux 的发行版, 安装更加方便, 初始安装自带桌面, 方便进行后续操作, 同时接近上游, 不像 Manjaro 一样对 Arch Linux 有很多改动."><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-01-13T19:06:44+08:00"><meta property="article:modified_time" content="2026-01-13T19:06:44+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="ArchLinux 安装配置"><meta name=twitter:description content="安装 # 这里选择 EndeavourOS , 它是一个 Arch Linux 的发行版, 安装更加方便, 初始安装自带桌面, 方便进行后续操作, 同时接近上游, 不像 Manjaro 一样对 Arch Linux 有很多改动."><link type=text/css rel=stylesheet href=/css/main.bundle.min.b5368c8f64c443a2db3640baffb642b259c300b1b22c920ca173c246129a987e618d2ce489d86098e3470c351836906c95f0e0b44fd3514bb75ca118f8652640.css integrity="sha512-tTaMj2TEQ6LbNkC6/7ZCslnDALGyLJIMoXPCRhKamH5hjSzkidhgmONHDDUYNpBslfDgtE/TUUu3XKEY+GUmQA=="><script type=text/javascript src=/js/appearance.min.6f41174b3a05b680820fe08cadbfa5fb7a7ca347b76a0955cdc68b9d8aca1ce24f0547e138cea33bcc7904d551a90afcb1cc7f2d9fe8557075d501419046c08c.js integrity="sha512-b0EXSzoFtoCCD+CMrb+l+3p8o0e3aglVzcaLnYrKHOJPBUfhOM6jO8x5BNVRqQr8scx/LZ/oVXB11QFBkEbAjA=="></script><script src=/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7+kfJ6kKCJxQGC+8wm+Bz9JucDjDTGNew=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.0e2e7ce1e319db5369cd4badb8265de52c78d08df54617521bdac9c8cd335eea6133a82c83f9cb19baf67b8133335130e7e8ff7cfeaf7171016648dbf5a0578a.js integrity="sha512-Di584eMZ21NpzUutuCZd5Sx40I31RhdSG9rJyM0zXuphM6gsg/nLGbr2e4EzM1Ew5+j/fP6vcXEBZkjb9aBXig==" data-copy=复制 data-copied=已复制></script><script src=/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj+KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"ArchLinux 安装配置","headline":"ArchLinux 安装配置","inLanguage":"zh-cn","url":"https://golixp.github.io/posts/linux/archlinux%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/","author":{"@type":"Person","name":"Lixp"},"copyrightYear":"2026","dateCreated":"2026-01-13T19:06:44\u002b08:00","datePublished":"2026-01-13T19:06:44\u002b08:00","dateModified":"2026-01-13T19:06:44\u002b08:00","mainEntityOfPage":"true","wordCount":"7598"}]</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4R846BFWWL"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4R846BFWWL")</script></head><body class="flex flex-col h-screen m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32 text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral bf-scrollbar"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
跳过正文</a></div><div class="main-menu flex items-center w-full gap-2 p-1 pl-0"><div><a href=/ class=flex><span class=sr-only>Lixp的Blog</span>
<img src=/img/bird-earth_africa.png width=267 height=267 class="logo max-h-20 max-w-20 object-scale-down object-left nozoom" alt></a></div><a href=/ class="text-base font-medium truncate min-w-0 shrink">Lixp的Blog</a><div class="flex items-center ms-auto"><div class="hidden md:flex"><nav class="flex items-center gap-x-5 h-12"><button id=search-button aria-label=Search class="text-base bf-icon-color-hover" title="搜索 (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="flex items-center"><button id=appearance-switcher aria-label="Dark mode switcher" type=button class="text-base bf-icon-color-hover"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav></div><div class="flex md:hidden"><div class="flex items-center h-14 gap-4"><button id=search-button-mobile aria-label=Search class="flex items-center justify-center bf-icon-color-hover" title="搜索 (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<button id=appearance-switcher-mobile type=button aria-label="Dark mode switcher" class="flex items-center justify-center text-neutral-900 hover:text-primary-600 dark:text-neutral-200 dark:hover:text-primary-400"><div class=dark:hidden><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="hidden dark:block"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div></div></div><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header id=single_header class="mt-5 max-w-prose"><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class=hidden><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/>Lixp的Blog</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/>Posts</a><span class="px-1 text-primary-500">/</span></li><li class=hidden><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/linux/archlinux%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/>ArchLinux 安装配置</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">ArchLinux 安装配置</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2026-01-13T19:06:44+08:00>2026-01-13</time><span class="px-2 text-primary-500">&#183;</span><span>7598 字</span><span class="px-2 text-primary-500">&#183;</span><span title=预计阅读>16 分钟</span></div></div><div class="flex author"><img class="!mt-0 !mb-0 h-24 w-24 rounded-full me-4" width=96 height=96 alt=Lixp src=/img/computer-bird_700x700_hu_775fd8e0c1ca30a0.png data-zoom-src=/img/computer-bird_700x700_hu_81f1f54864af3b07.png><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">作者</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Lixp</div><div class="text-2xl sm:text-lg"></div></div></div><div class=mb-5></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ms-auto px-0 lg:order-last lg:ps-8 lg:max-w-2xs"><div class="toc ps-5 print:hidden lg:sticky lg:top-10"><details open id=TOCView class="toc-right mt-0 overflow-y-auto overscroll-contain bf-scrollbar rounded-lg -ms-5 ps-5 pe-2 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">目录</summary><div class="min-w-[220px] py-2 border-dotted border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#安装>安装</a></li><li><a href=#修改-home-目录中的中文>修改 Home 目录中的中文</a></li><li><a href=#添加国内源>添加国内源</a></li><li><a href=#配置代理>配置代理</a></li><li><a href=#配置-ssh>配置 SSH</a></li><li><a href=#配置-git>配置 Git</a></li><li><a href=#安装桌面>安装桌面</a></li><li><a href=#调整-grub>调整 Grub</a></li><li><a href=#桌面相关配置>桌面相关配置</a><ul><li><a href=#qt-应用>QT 应用</a></li><li><a href=#gtk-应用>GTK 应用</a></li><li><a href=#electron-应用>Electron 应用</a></li><li><a href=#安装图标包>安装图标包</a></li><li><a href=#配置鼠标指针>配置鼠标指针</a></li></ul></li><li><a href=#配置显示器><del>配置显示器</del></a></li><li><a href=#配置鼠标>配置鼠标</a></li><li><a href=#安装系统快照备份>安装系统快照备份</a><ul><li><a href=#timeshift>TimeShift</a></li><li><a href=#snapper>Snapper</a></li></ul></li><li><a href=#安装终端编辑器>安装终端编辑器</a></li><li><a href=#安装字体>安装字体</a></li><li><a href=#配置-ghostty>配置 Ghostty</a></li><li><a href=#安装-shell>安装 Shell</a><ul><li><a href=#fish>Fish</a></li><li><a href=#zsh>Zsh</a></li></ul></li><li><a href=#安装输入法>安装输入法</a></li><li><a href=#安装终端文件浏览器>安装终端文件浏览器</a></li><li><a href=#安装-visual-studio-code>安装 Visual Studio Code</a></li><li><a href=#安装微信>安装微信</a></li><li><a href=#安装-logseq>安装 Logseq</a></li><li><a href=#安装浏览器>安装浏览器</a></li><li><a href=#安装音乐软件>安装音乐软件</a></li><li><a href=#安装腾讯会议>安装腾讯会议</a></li><li><a href=#安装-wps>安装 WPS</a></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg -ms-5 ps-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">目录</summary><div class="py-2 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#安装>安装</a></li><li><a href=#修改-home-目录中的中文>修改 Home 目录中的中文</a></li><li><a href=#添加国内源>添加国内源</a></li><li><a href=#配置代理>配置代理</a></li><li><a href=#配置-ssh>配置 SSH</a></li><li><a href=#配置-git>配置 Git</a></li><li><a href=#安装桌面>安装桌面</a></li><li><a href=#调整-grub>调整 Grub</a></li><li><a href=#桌面相关配置>桌面相关配置</a><ul><li><a href=#qt-应用>QT 应用</a></li><li><a href=#gtk-应用>GTK 应用</a></li><li><a href=#electron-应用>Electron 应用</a></li><li><a href=#安装图标包>安装图标包</a></li><li><a href=#配置鼠标指针>配置鼠标指针</a></li></ul></li><li><a href=#配置显示器><del>配置显示器</del></a></li><li><a href=#配置鼠标>配置鼠标</a></li><li><a href=#安装系统快照备份>安装系统快照备份</a><ul><li><a href=#timeshift>TimeShift</a></li><li><a href=#snapper>Snapper</a></li></ul></li><li><a href=#安装终端编辑器>安装终端编辑器</a></li><li><a href=#安装字体>安装字体</a></li><li><a href=#配置-ghostty>配置 Ghostty</a></li><li><a href=#安装-shell>安装 Shell</a><ul><li><a href=#fish>Fish</a></li><li><a href=#zsh>Zsh</a></li></ul></li><li><a href=#安装输入法>安装输入法</a></li><li><a href=#安装终端文件浏览器>安装终端文件浏览器</a></li><li><a href=#安装-visual-studio-code>安装 Visual Studio Code</a></li><li><a href=#安装微信>安装微信</a></li><li><a href=#安装-logseq>安装 Logseq</a></li><li><a href=#安装浏览器>安装浏览器</a></li><li><a href=#安装音乐软件>安装音乐软件</a></li><li><a href=#安装腾讯会议>安装腾讯会议</a></li><li><a href=#安装-wps>安装 WPS</a></li></ul></nav></div></details><script>(function(){"use strict";const s=.33,o="#TableOfContents",i=".anchor",a='a[href^="#"]',r="li ul",c="active";let t=!1;function l(e,n){const o=window.scrollY+window.innerHeight*n,i=[...document.querySelectorAll('#TableOfContents a[href^="#"]')],s=new Set(i.map(e=>e.getAttribute("href").substring(1)));if(t)for(let t=0;t<e.length;t++){const n=e[t];if(!s.has(n.id))continue;const o=n.getBoundingClientRect().top+window.scrollY;if(Math.abs(window.scrollY-o)<100)return n.id}for(let t=e.length-1;t>=0;t--){const n=e[t].getBoundingClientRect().top+window.scrollY;if(n<=o&&s.has(e[t].id))return e[t].id}return e.find(e=>s.has(e.id))?.id||""}function e({toc:e,anchors:t,links:n,scrollOffset:s,collapseInactive:o}){const i=l(t,s);if(!i)return;if(n.forEach(e=>{const t=e.getAttribute("href")===`#${i}`;if(e.classList.toggle(c,t),o){const n=e.closest("li")?.querySelector("ul");n&&(n.style.display=t?"":"none")}}),o){const n=e.querySelector(`a[href="#${CSS.escape(i)}"]`);let t=n;for(;t&&t!==e;)t.tagName==="UL"&&(t.style.display=""),t.tagName==="LI"&&t.querySelector("ul")?.style.setProperty("display",""),t=t.parentElement}}function n(){const n=document.querySelector(o);if(!n)return;const l=!1,u=[...document.querySelectorAll(i)],d=[...n.querySelectorAll(a)];l&&n.querySelectorAll(r).forEach(e=>e.style.display="none"),d.forEach(e=>{e.addEventListener("click",()=>{t=!0})});const c={toc:n,anchors:u,links:d,scrollOffset:s,collapseInactive:l};window.addEventListener("scroll",()=>e(c),{passive:!0}),window.addEventListener("hashchange",()=>e(c),{passive:!0}),e(c)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",n):n()})()</script></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><h2 class="relative group">安装<div id=安装 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e5%ae%89%e8%a3%85 aria-label=锚点>#</a></span></h2><p>这里选择 EndeavourOS , 它是一个 Arch Linux 的发行版, 安装更加方便, 初始安装自带桌面, 方便进行后续操作, 同时接近上游, 不像 Manjaro 一样对 Arch Linux 有很多改动.</p><p>安装时注意选择 Btrfs + Grub . 推荐离线安装直接可以安装 KDE 版本.</p><h2 class="relative group">修改 Home 目录中的中文<div id=修改-home-目录中的中文 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e4%bf%ae%e6%94%b9-home-%e7%9b%ae%e5%bd%95%e4%b8%ad%e7%9a%84%e4%b8%ad%e6%96%87 aria-label=锚点>#</a></span></h2><p>在安装系统时如果选择中文, Home 目录下会生成一些中文目录, 使用以下命令修改其为英文方便终端操作.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>LC_ALL</span><span class=o>=</span>en_US.UTF-8 xdg-user-dirs-update --force
</span></span><span class=line><span class=cl>rmdir 桌面 公共 视频 图片 文档 音乐 下载 模板</span></span></code></pre></div></div><p><code>xdg-user-dirs-update</code> 不会删除旧的中文目录, <code>rmdir</code>只会删除空目录, 删除失败的需要检查其中的文件并迁移.</p><h2 class="relative group">添加国内源<div id=添加国内源 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e6%b7%bb%e5%8a%a0%e5%9b%bd%e5%86%85%e6%ba%90 aria-label=锚点>#</a></span></h2><p><code>reflector</code> 是一个自动检测 Pacman 镜像源速度并应用的工具, EndeavourOS 安装自带, 可以用以下命令检测速度最快的源.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo reflector --country China <span class=se>\
</span></span></span><span class=line><span class=cl>    --protocol https <span class=se>\
</span></span></span><span class=line><span class=cl>    --latest <span class=m>3</span> <span class=se>\
</span></span></span><span class=line><span class=cl>    --save /etc/pacman.d/mirrorlist</span></span></code></pre></div></div><p>或者只加<code>sudo reflector --country China</code>也可以, 其它选项可以默认.</p><p>由于 Arch Linux 的官方监测服务器位于海外, 可能会连接国内镜像源超时导致镜像评估异常, 所以还是手动添加镜像源比较好, 从 <a href=https://archlinux.org/mirrors/ target=_blank rel=noreferrer>https://archlinux.org/mirrors/</a> 可以筛选镜像.</p><p>将以下镜像源写入 <code>/etc/pacman.d/mirrorlist</code></p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch
</span></span><span class=line><span class=cl>Server = https://mirrors.aliyun.com/archlinux/$repo/os/$arch
</span></span><span class=line><span class=cl>Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch</span></span></code></pre></div></div><p>然后 <code>sudo pacman -Syyu</code> 更新系统, 如果有内核更新可能需要重启, 重启即可.</p><p>之后添加 ArchLinuxCN 镜像源, 在<code>/etc/pacman.conf</code>添加:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>[archlinuxcn]
</span></span><span class=line><span class=cl>Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch
</span></span><span class=line><span class=cl>Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch
</span></span><span class=line><span class=cl>Server = https://mirrors.aliyun.com/archlinuxcn/$arch
</span></span><span class=line><span class=cl>Server = https://mirrors.cloud.tencent.com/archlinuxcn/$arch</span></span></code></pre></div></div><p>然后执行命令:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo pacman -Sy
</span></span><span class=line><span class=cl>sudo pacman -S archlinuxcn-keyring</span></span></code></pre></div></div><h2 class="relative group">配置代理<div id=配置代理 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e9%85%8d%e7%bd%ae%e4%bb%a3%e7%90%86 aria-label=锚点>#</a></span></h2><p>ArchlinuxCN 中有 Clash Verge Rev , 国内可以直连, 直接使用 <code>pacman</code> 安装.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pacman -S archlinuxcn/clash-verge-rev</span></span></code></pre></div></div><p>安装打开订阅好配置文件并开启代理后, 在<code>/etc/environment</code>中追加写入以下内容</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>http_proxy=http://127.0.0.1:7897
</span></span><span class=line><span class=cl>https_proxy=http://127.0.0.1:7897
</span></span><span class=line><span class=cl>ftp_proxy=http://127.0.0.1:7897
</span></span><span class=line><span class=cl>all_proxy=socks5://127.0.0.1:7897
</span></span><span class=line><span class=cl>no_proxy=&#34;localhost,127.0.0.1,localaddress,.localdomain.com&#34;</span></span></code></pre></div></div><p>根据自己的端口自行修改细节, 写入完成后需要重启才可以让读取新写入的全局环境变量.</p><p>如果你使用虚拟机, 可以直接连接宿主机的代理, VirtualBox 默认指向本机网络地址为<code>192.168.56.1</code> 或者 <code>10.0.2.2</code> , 宿主机代理软件允许局域网连接即可.</p><p>重启之后确保网络畅通, 就可以更新 Aur 了, 使用以下命令更新.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yay -Syu</span></span></code></pre></div></div><h2 class="relative group">配置 SSH<div id=配置-ssh class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e9%85%8d%e7%bd%ae-ssh aria-label=锚点>#</a></span></h2><p>使用 <code>ssh-keygen</code> 命令可以生成 ssh-key , 可以添加到 GitHub 仓库或者远端服务器, 实现无密码 SSH 通信.</p><p>如果机器有远程 SSH 连接的需求, 可以使用以下命令开启 <code>sshd</code> 服务.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> --now sshd
</span></span><span class=line><span class=cl>sudo systemctl status sshd</span></span></code></pre></div></div><h2 class="relative group">配置 Git<div id=配置-git class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e9%85%8d%e7%bd%ae-git aria-label=锚点>#</a></span></h2><p>使用以下命令配置 Git 名称与邮箱.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git config --global user.name <span class=s2>&#34;name&#34;</span>
</span></span><span class=line><span class=cl>git config --global user.email <span class=s2>&#34;email@example.com&#34;</span></span></span></code></pre></div></div><p>执行以下命令让终端 Git 命令可以正常显示中文.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git config --global core.quotepath false</span></span></code></pre></div></div><p>在<code>~/.ssh/config</code>中添加以下内容让 GitHub 的 SSH 连接的 push/pull/clone 走代理</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Host github.com
</span></span><span class=line><span class=cl>    # 使github的ssh连接走代理
</span></span><span class=line><span class=cl>    ProxyCommand socat - PROXY:127.0.0.1:%h:%p,proxyport=7897</span></span></code></pre></div></div><p>如果没有 <code>socat</code> 需要自行安装. 配置中代理 IP 和端口也要注意修改为自己的.</p><p>使用 <code>ssh -T git@github.com</code> 可以测试连通性检验配置是否成功.</p><h2 class="relative group">安装桌面<div id=安装桌面 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e5%ae%89%e8%a3%85%e6%a1%8c%e9%9d%a2 aria-label=锚点>#</a></span></h2><p>使用以下命令使用 Dank Material Shell 项目的安装器安装 Niri + Dank Material Shell 整套配置.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -fsSL https://install.danklinux.com <span class=p>|</span> sh</span></span></code></pre></div></div><p>出现<code>Error: Could not fetch latest version</code>是因为节点被 github 限制访问无法获取版本号, 可以更换纯净节点或者手动指定版本号.</p><p>安装过程中可以选择 Wayland 合成器为 Niri 或者 Hyprland , 终端可以选择 Ghostty/Alacritty/Kitty , 这里选择 Niri + Ghostty .</p><p>安装完成后注销然后在启动界面左下角可以选择进入 niri 桌面. 默认 <code>Mod + T</code> 开启终端, <code>Mod + 空格</code> 可以搜索并运行程序, <code>Mod</code> 键可配置, 默认是 <code>Super</code> , 就是 Windows 下的 <code>Win</code> 键.</p><p>使用 <code>dms ipc call keybinds toggle niri</code> 命令可以弹出一个悬浮窗口查看所有快捷键, 使用 <code>dms keybinds show niri</code> 可以在终端输出所有快捷键的 JSON 格式.</p><p>还可以选择安装 <code>dsearch</code> , 安装并启动后在启动器界面开头输入 <code>/</code> 可以进行文件搜索, 还支持搜索文件内容.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>yay -S aur/dsearch-bin</span></span></code></pre></div></div><p>安装后启动</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>systemctl --user <span class=nb>enable</span> --now dsearch</span></span></code></pre></div></div><h2 class="relative group">调整 Grub<div id=调整-grub class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e8%b0%83%e6%95%b4-grub aria-label=锚点>#</a></span></h2><p>如果使用了 Timeshift 或者 Snapper 的快照功能, 安装 <code>grub-btrfs</code> 实现在 Grub 界面直接从快照启动, 这样在系统挂掉后可以从快照启动进入系统而不需要 LiveCD .</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>yay -S grub-btrfs</span></span></code></pre></div></div><p>在<code>/etc/grub.d/</code>可以查看引导生成脚本, 决定 Grub 引导顺序, 修改它们就可以修改 Grub 界面的启动顺序, 内容如下:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>&gt; ls /etc/grub.d/ -l
</span></span><span class=line><span class=cl>总计 124
</span></span><span class=line><span class=cl>-rwxr-xr-x 1 root root  9816 12月 1日 22:52 00_header*
</span></span><span class=line><span class=cl>-rwxr-xr-x 1 root root 12831 12月 1日 22:52 08_os-prober*
</span></span><span class=line><span class=cl>-rwxr-xr-x 1 root root   286  1月10日 23:05 09_eos_windows*
</span></span><span class=line><span class=cl>-rwxr-xr-x 1 root root 12631 12月 1日 22:52 10_linux*
</span></span><span class=line><span class=cl>-rwxr-xr-x 1 root root 14393 12月 1日 22:52 20_linux_xen*
</span></span><span class=line><span class=cl>-rwxr-xr-x 1 root root   786 12月 1日 22:52 25_bli*
</span></span><span class=line><span class=cl>-rwxr-xr-x 1 root root  1174 12月 1日 22:52 30_uefi-firmware*
</span></span><span class=line><span class=cl>-rwxr-xr-x 1 root root   744 12月19日 18:31 35_fwupd*
</span></span><span class=line><span class=cl>-rwxr-xr-x 1 root root   214 12月 1日 22:52 40_custom*
</span></span><span class=line><span class=cl>-rwxr-xr-x 1 root root   215 12月 1日 22:52 41_custom*
</span></span><span class=line><span class=cl>-rwxr-xr-x 1 root root 29811  9月17日 23:59 41_snapshots-btrfs*
</span></span><span class=line><span class=cl>-rwxr-xr-x 1 root root  1394 2024年12月26日 60_memtest86+-efi*
</span></span><span class=line><span class=cl>-rw-r--r-- 1 root root   483 12月 1日 22:52 README</span></span></code></pre></div></div><p>其中 <code>10_linux</code> 引导 Linux 系统, <code>08_os-prober</code> 是一个自动化搜索工具, 它会扫描所有硬盘分区，寻找 Windows 或其他已安装的 Linux 发行版，并将它们加入启动菜单, <code>41_snapshots-btrfs</code>是刚才安装的 snapshots-btrfs , <code>09_eos_windows</code>是 EndeavourOS 系统的 Windows 搜索脚本, 防止 os-prober 失效, 修改其中数字顺序即可决定 Grub 启动菜单顺序, 可以自行调整.</p><p>所有配置完成重建 Grub 配置:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sudo grub-mkconfig -o /boot/grub/grub.cfg</span></span></code></pre></div></div><h2 class="relative group">桌面相关配置<div id=桌面相关配置 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e6%a1%8c%e9%9d%a2%e7%9b%b8%e5%85%b3%e9%85%8d%e7%bd%ae aria-label=锚点>#</a></span></h2><h3 class="relative group">QT 应用<div id=qt-应用 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#qt-%e5%ba%94%e7%94%a8 aria-label=锚点>#</a></span></h3><p>安装相关 QT5/QT6 样式配置工具</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yay -S qt6ct-kde qt5ct</span></span></code></pre></div></div><p><code>qt6ct-kde</code> 是 qt6ct 针对 kde 应用的补丁版本, 如果不使用 kde 相关软件可以装<code>qt6ct</code>.</p><p>安装 QT5/QT6 Wayland 运行环境</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yay -S qt6-wayland qt5-wayland</span></span></code></pre></div></div><p>在 <code>~/.config/environment.d</code> 下创建环境变量是现代 Linux 发行版推荐的设置全局图形界面用户变量的方式, 在这里创建文件 <code>10-wayland.conf</code>, 写入以下内容:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl># 指定 qt6ct 配置 QT 应用主题
</span></span><span class=line><span class=cl>QT_QPA_PLATFORMTHEME=qt6ct
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 指定 QT 应用优先使用 Wayland
</span></span><span class=line><span class=cl>QT_QPA_PLATFORM=&#34;wayland;xcb&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 解决部分 XWayland 应用的输入问题
</span></span><span class=line><span class=cl>XMODIFIERS=@im=fcitx</span></span></code></pre></div></div><p>环境变量加入指定 QT 应用配置工具, QT5 应用识别到<code>QT_QPA_PLATFORMTHEME=qt6ct</code>环境变量会自动去找 qt5ct, 所以不用担心 QT5 应用兼容性. <code>QT_QPA_PLATFORM="wayland;xcb"</code>是指定 QT 应用优先使用 Wayland, 如果不兼容则使用 XWayland.</p><p>然后在 DMS 的主题配置界面中, 点击应用 QT 配色即可在 qt6ct 和 qt5ct 配置目录下生成 Matugen 主题, 分别打开两个配置文件配置应用这个主题即可.</p><p>由于我们环境变量在用户端配置, 某些 root 权限启动的应用无法读取这些配置, 所以可以把用户目录的相关配置文件软链接到 root 目录中.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo mkdir -p /root/.config/qt6ct/colors/
</span></span><span class=line><span class=cl>sudo ln -s ~/.config/qt6ct/qt6ct.conf /root/.config/qt6ct/qt6ct.conf
</span></span><span class=line><span class=cl>sudo ln -s ~/.config/qt6ct/colors/matugen.conf /root/.config/qt6ct/colors/matugen.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sudo mkdir -p /root/.config/qt5ct/colors/
</span></span><span class=line><span class=cl>sudo ln -s ~/.config/qt5ct/qt5ct.conf /root/.config/qt5ct/qt5ct.conf
</span></span><span class=line><span class=cl>sudo ln -s ~/.config/qt5ct/colors/matugen.conf /root/.config/qt5ct/colors/matugen.conf</span></span></code></pre></div></div><h3 class="relative group">GTK 应用<div id=gtk-应用 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#gtk-%e5%ba%94%e7%94%a8 aria-label=锚点>#</a></span></h3><p>GTK 应用比较封闭, 不像 Qt 应用一样可以直接配置 Matugen 生成的颜色方案, 所以 DMS 使用 CSS 注入的方式来让 GTK 应用使用 Matugen 颜色方案, 具体来说就是覆盖 <code>~/.config/gtk-3.0/gtk.css</code> 和 <code>~/.config/gtk-4.0/gtk.css</code> 两个文件.</p><p>对于 GTK3 应用, 会尝试读取 <code>~/.config/gtk-3.0/settings.ini</code>, 如果存在此文件则使用 <code>~/.config/gtk-3.0/gtk.css</code> 的内容, 不存在则会使用内置配色和主题; 而 GTK4 应用使用<code>libadwaita</code>库, 只会默认读取 <code>~/.config/gtk-4.0/gtk.css</code>, 配置则监听 <code>xdg-desktop-portal</code> 相关信息.</p><p>所以首先安装 GTK3 配置生成工具<code>nwg-look</code>和与<code>Libadwaita</code>样式相似的 GTK3 主题<code>adw-gtk-theme</code>:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yay -S nwg-look adw-gtk-theme</span></span></code></pre></div></div><p>打开<code>nwg-look</code>在配置中选择<code>adw-gtk3</code>主题并应用, 就会生成 GTK3 配置文件.</p><p>然后在 DMS 主题配置中可以点击应用 GTK 配色, 让 DMS 的配置注入即可.</p><h3 class="relative group">Electron 应用<div id=electron-应用 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#electron-%e5%ba%94%e7%94%a8 aria-label=锚点>#</a></span></h3><p>添加以下环境变量可以修复 Wayland 环境下 Electron 应用的很多问题.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>ELECTRON_OZONE_PLATFORM_HINT=auto</span></span></code></pre></div></div><p>如果使用 DankMaterialShell 安装, 环境变量在会在 <code>~/.config/environment.d/90-dms.conf</code> 配置无需用户写入.</p><h3 class="relative group">安装图标包<div id=安装图标包 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e5%ae%89%e8%a3%85%e5%9b%be%e6%a0%87%e5%8c%85 aria-label=锚点>#</a></span></h3><p>安装 papirus 图标包</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yay -S papirus-icon-theme</span></span></code></pre></div></div><p>papirus 图标包是很流行的一套开源图标包, 适配应用程序范围较广, 在右上角 DMS 配置界面中主题配置栏可以选择这个图标包. 依赖上面配置的 <code>QT_QPA_PLATFORMTHEME=qt6ct</code> 环境变量, 上一步配置完需要重启才能读到配置的环境变量.</p><h3 class="relative group">配置鼠标指针<div id=配置鼠标指针 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e9%85%8d%e7%bd%ae%e9%bc%a0%e6%a0%87%e6%8c%87%e9%92%88 aria-label=锚点>#</a></span></h3><p>DMS配置界面可以配置鼠标指针, 推荐<code>capitaine-cursors</code>在高分屏幕表现比较好.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yay -S extra/capitaine-cursors</span></span></code></pre></div></div><h2 class="relative group"><del>配置显示器</del><div id=配置显示器 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e9%85%8d%e7%bd%ae%e6%98%be%e7%a4%ba%e5%99%a8 aria-label=锚点>#</a></span></h2><p>Dank Material Shell 1.2 版本已经集成了配置界面配置显示器的功能, 直接在配置界面配置即可.</p><p><del>在 Niri 配置文件中添加以下内容可以配置显示屏, 位置通常是 <code>~/.config/niri/config.kdl</code> .</del></p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>output &#34;DP-3&#34; {
</span></span><span class=line><span class=cl>    // 分辨率
</span></span><span class=line><span class=cl>    mode &#34;3840x2160@160&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // 1.5 倍缩放
</span></span><span class=line><span class=cl>    scale 1.5
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // 确保位置在原点
</span></span><span class=line><span class=cl>    position x=0 y=0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // 高刷支持
</span></span><span class=line><span class=cl>    variable-refresh-rate
</span></span><span class=line><span class=cl>}</span></span></code></pre></div></div><p>在你没写入这些配置时 Niri 会自动检测显示器配置, 通过 <code>niri msg outputs</code> 查看当前配置来获取显示器名称和其它信息.</p><h2 class="relative group">配置鼠标<div id=配置鼠标 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e9%85%8d%e7%bd%ae%e9%bc%a0%e6%a0%87 aria-label=锚点>#</a></span></h2><p>在 niri 配置文件中添加以下内容, 位置通常是 <code>~/.config/niri/config.kdl</code> .</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>input {
</span></span><span class=line><span class=cl>    mouse {
</span></span><span class=line><span class=cl>        // 关闭鼠标加速，使用 1:1 的映射
</span></span><span class=line><span class=cl>        accel-profile &#34;flat&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        // 取值范围通常是 -1.0 到 1.0。
</span></span><span class=line><span class=cl>        accel-speed 0.0
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}</span></span></code></pre></div></div><h2 class="relative group">安装系统快照备份<div id=安装系统快照备份 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e5%ae%89%e8%a3%85%e7%b3%bb%e7%bb%9f%e5%bf%ab%e7%85%a7%e5%a4%87%e4%bb%bd aria-label=锚点>#</a></span></h2><p>常用快照组件有 TimeShift 和 Snapper .</p><h3 class="relative group">TimeShift<div id=timeshift class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#timeshift aria-label=锚点>#</a></span></h3><p>TimeShift 是 Ubuntu 常用的快照软件, 使用以下命令安装</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>yay -S timeshift</span></span></code></pre></div></div><p>之后可以启动 timeshift 在 GUI 界面进行详细配置, 之后安装 <code>timeshift-autosnap</code> 实现更新前自动备份.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>yay -S timeshift-autosnap</span></span></code></pre></div></div><h3 class="relative group">Snapper<div id=snapper class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#snapper aria-label=锚点>#</a></span></h3><p>Snapper 功能更强大, 是 OpenSuse 系统的组件, 默认没有图形界面, 配合 Btrfs Assistant 使用.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>yay -S snapper btrfs-assistant</span></span></code></pre></div></div><p>在 Snapper Settings 界面可以创建对不同子卷的配置, 可以分别创建对于 root 和 home 目录的备份规则, 启用 Enable timeline snapshots 后可以配置备份周期, 然后点击 Save 保存.</p><p>对 root 和 home 分别配置后勾选 systemd Unit Settings 中的选项, 然后 Apply systemd changes 即可启用快照服务, 三个服务中 timeline 代表上面配置的周期快照, cleanup 代表周期按照限制清理快照, boot 代表开机自动快照, 根据需求选择.</p><p>注意如果不使用图形界面配置, 记得将 Snapper 的备份目录配置为 Btrfs 子卷, 而不是默认的普通目录, 以免出现递归快照, Btrfs Assistant 会自动进行这样的操作, 而命令行中不会如此.</p><p>安装<code>snap-pac</code>来在 pacman 更新前自动快照.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>yay -S snap-pac</span></span></code></pre></div></div><h2 class="relative group">安装终端编辑器<div id=安装终端编辑器 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e5%ae%89%e8%a3%85%e7%bb%88%e7%ab%af%e7%bc%96%e8%be%91%e5%99%a8 aria-label=锚点>#</a></span></h2><p>EndeavourOS 默认只有 Vi , 不太好用, 这里安装 Helix 作为终端编辑器, 也可以安装 Vim/NeoVim .</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yay -S helix</span></span></code></pre></div></div><p>ArchLinux 中 helix 的默认别名并不是 hx, 可以手动软链接</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ln -s /usr/bin/helix /usr/local/bin/hx</span></span></code></pre></div></div><h2 class="relative group">安装字体<div id=安装字体 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e5%ae%89%e8%a3%85%e5%ad%97%e4%bd%93 aria-label=锚点>#</a></span></h2><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>yay -S noto-fonts noto-fonts-cjk noto-fonts-emoji noto-fonts-extra
</span></span><span class=line><span class=cl>yay -S ttf-sarasa-gothic
</span></span><span class=line><span class=cl>yay -S ttf-maplemononormal-nf-cn-unhinted
</span></span><span class=line><span class=cl>yay -S ttf-lxgw-wenkai ttf-lxgw-wenkai-mono</span></span></code></pre></div></div><p><code>noto</code> Noto 系列字体, 包含世界上大部分语言的字符, 保证系统不会因为没有字体显示方块</p><p><code>ttf-sarasa-gothic</code> 更纱黑体, 包含所有版本字体, 包括等宽和 UI 等各种版本</p><p><code>ttf-maplemono-nf-cn-unhinted</code> 适合作为编程等宽字体. <code>normal</code>是让字体中的一些字符更加正常, 默认预设比较有个性, <code>nf</code> 意为嵌入 Nerd-Font 的版本; <code>cn</code> 意为中文版本, 嵌入中文和日文字形; <code>unhinted</code> 意为适配高分辨率屏幕. Aur 和 ArchLinuxCN 还有很多其它版本, 全部标签含义可以去 <a href=https://github.com/subframe7536/maple-font target=_blank rel=noreferrer>Maple Mono 项目官网</a> 查询.</p><p><code>ttf-lxgw-wenkai</code> 霞鹜文楷, 比较美观, 适合阅读</p><p><code>ttf-lxgw-wenkai-mono</code> 霞鹜文楷等宽版本</p><p>niri 不像 KDE 那样有 GUI 界面可以指定系统字体, 所以有时会出现优先显示日式字形的情况, 并且系统默认字体是以字体名称来排序搜索到第一个可用字体, 非常不稳定, 所以需要编写字体配置文件, 指定系统搜索字体顺序, 在 <code>~/.config/fontconfig/fonts.conf</code> 创建用户配置指定字体相关内容, 优先级高于 KDE 等桌面环境的配置.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>&lt;?xml version=&#34;1.0&#34;?&gt;
</span></span><span class=line><span class=cl>&lt;!DOCTYPE fontconfig SYSTEM &#34;fonts.dtd&#34;&gt;
</span></span><span class=line><span class=cl>&lt;fontconfig&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  &lt;!-- 无衬线字体配置 --&gt;
</span></span><span class=line><span class=cl>  &lt;alias&gt;
</span></span><span class=line><span class=cl>    &lt;family&gt;sans-serif&lt;/family&gt;
</span></span><span class=line><span class=cl>    &lt;prefer&gt;
</span></span><span class=line><span class=cl>      &lt;family&gt;Noto Sans&lt;/family&gt;
</span></span><span class=line><span class=cl>      &lt;family&gt;Noto Sans CJK SC&lt;/family&gt;
</span></span><span class=line><span class=cl>      &lt;family&gt;Sarasa Gothic SC&lt;/family&gt;
</span></span><span class=line><span class=cl>    &lt;/prefer&gt;
</span></span><span class=line><span class=cl>  &lt;/alias&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  &lt;!-- 衬线字体配置 --&gt;
</span></span><span class=line><span class=cl>  &lt;alias&gt;
</span></span><span class=line><span class=cl>    &lt;family&gt;serif&lt;/family&gt;
</span></span><span class=line><span class=cl>    &lt;prefer&gt;
</span></span><span class=line><span class=cl>      &lt;family&gt;Noto Serif&lt;/family&gt;
</span></span><span class=line><span class=cl>      &lt;family&gt;Noto Serif CJK SC&lt;/family&gt;
</span></span><span class=line><span class=cl>    &lt;/prefer&gt;
</span></span><span class=line><span class=cl>  &lt;/alias&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  &lt;!-- 等宽字体配置 --&gt;
</span></span><span class=line><span class=cl>  &lt;alias&gt;
</span></span><span class=line><span class=cl>    &lt;family&gt;monospace&lt;/family&gt;
</span></span><span class=line><span class=cl>    &lt;prefer&gt;
</span></span><span class=line><span class=cl>      &lt;family&gt;Sarasa Mono SC&lt;/family&gt;
</span></span><span class=line><span class=cl>      &lt;family&gt;Noto Sans Mono&lt;/family&gt;
</span></span><span class=line><span class=cl>      &lt;family&gt;Noto Sans Mono CJK SC&lt;/family&gt;
</span></span><span class=line><span class=cl>    &lt;/prefer&gt;
</span></span><span class=line><span class=cl>  &lt;/alias&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  &lt;!-- emoji 配置 --&gt;
</span></span><span class=line><span class=cl>  &lt;alias&gt;
</span></span><span class=line><span class=cl>    &lt;family&gt;emoji&lt;/family&gt;
</span></span><span class=line><span class=cl>    &lt;prefer&gt;
</span></span><span class=line><span class=cl>      &lt;family&gt;Noto Color Emoji&lt;/family&gt;
</span></span><span class=line><span class=cl>    &lt;/prefer&gt;
</span></span><span class=line><span class=cl>  &lt;/alias&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;/fontconfig&gt;</span></span></code></pre></div></div><p>保存配置后运行 <code>fc-cache -fv</code> 来刷新缓存应用最新修改</p><p>使用以下三条命令可以分别查看当前系统各类字体的搜索顺序, 运行可以看到我们指定的字体排在所有其它系统字体之前.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>fc-match -s sans-serif
</span></span><span class=line><span class=cl>fc-match -s serif
</span></span><span class=line><span class=cl>fc-match -s monospace</span></span></code></pre></div></div><p>配置指定了各类字体默认搜索顺序, 当然在各自应用也可以字形指定任意字体, 其中 noto 系列字体应该是 KDE 桌面环境自带, 如果没有需要字形安装, <code>fc-list</code> 可以查看当前系统所有字体.</p><h2 class="relative group">配置 Ghostty<div id=配置-ghostty class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e9%85%8d%e7%bd%ae-ghostty aria-label=锚点>#</a></span></h2><p>在 <code>~/.config/ghostty/config</code> 中添加以下配置.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl># Font Configuration
</span></span><span class=line><span class=cl>font-size = 14
</span></span><span class=line><span class=cl>font-family = &#34;Maple Mono Normal NF CN&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 增加文本内容与窗口边缘之间的内边距
</span></span><span class=line><span class=cl>window-padding-x = 12
</span></span><span class=line><span class=cl>window-padding-y = 12
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 输入时隐藏鼠标
</span></span><span class=line><span class=cl>mouse-hide-while-typing = true
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 关闭 Ghostty 无须确认
</span></span><span class=line><span class=cl>confirm-close-surface = false
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>theme = TokyoNight</span></span></code></pre></div></div><h2 class="relative group">安装 Shell<div id=安装-shell class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e5%ae%89%e8%a3%85-shell aria-label=锚点>#</a></span></h2><p>主流选择有 Fish 和 Zsh, Fish 开箱即用但是不兼容 Bash, 配置为系统默认 Shell 会有很多问题, Zsh 兼容 Bash, 可以作为系统默认 Shell, 但是配置比较复杂并且启动速度不如 Fish.</p><h3 class="relative group">Fish<div id=fish class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#fish aria-label=锚点>#</a></span></h3><p>Fish Shell 是一套开箱即用的 Shell.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo pacman -S fish</span></span></code></pre></div></div><p>运行 <code>fish_config</code> 可以在浏览器交互式配置一些细节.</p><h3 class="relative group">Zsh<div id=zsh class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#zsh aria-label=锚点>#</a></span></h3><p>首先安装 Zsh 本体:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>yay -S zsh</span></span></code></pre></div></div><p>oh-my-zsh 项目是 Zsh 配置的主流选择, 但是安装之后无插件启动 Shell 启动速度也会很慢, 大概会到 200ms 左右, 启用一些插件之后会更慢, 所以我们选择自行安装插件管理器 Antidote 来配置插件:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>yay -S zsh-antidote</span></span></code></pre></div></div><p>Antidote 可以对插件进行声明式配置, 首先为 <code>.zshrc</code> 加入 Antidote 的启动配置:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=nv>zsh_plugins</span><span class=o>=</span><span class=si>${</span><span class=nv>ZDOTDIR</span><span class=k>:-</span><span class=p>~</span><span class=si>}</span>/.zsh_plugins
</span></span><span class=line><span class=cl><span class=o>[[</span> -f <span class=si>${</span><span class=nv>zsh_plugins</span><span class=si>}</span>.txt <span class=o>]]</span> <span class=o>||</span> touch <span class=si>${</span><span class=nv>zsh_plugins</span><span class=si>}</span>.txt
</span></span><span class=line><span class=cl><span class=nv>fpath</span><span class=o>=(</span>/usr/share/zsh-antidote/functions <span class=nv>$fpath</span><span class=o>)</span>
</span></span><span class=line><span class=cl>autoload -Uz antidote
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> ! <span class=si>${</span><span class=nv>zsh_plugins</span><span class=si>}</span>.zsh -nt <span class=si>${</span><span class=nv>zsh_plugins</span><span class=si>}</span>.txt <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  antidote bundle &lt;<span class=si>${</span><span class=nv>zsh_plugins</span><span class=si>}</span>.txt &gt;<span class=p>|</span><span class=si>${</span><span class=nv>zsh_plugins</span><span class=si>}</span>.zsh
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=nb>source</span> <span class=si>${</span><span class=nv>zsh_plugins</span><span class=si>}</span>.zsh</span></span></code></pre></div></div><p>这是官网推荐的高性能启动方式.</p><p>之后配置插件列表, 在 <code>~/.zsh_plugins.txt</code> 下添加内容:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl># Zsh 补全系统
</span></span><span class=line><span class=cl>mattmc3/ez-compinit                            # 加载 Zsh 补全系统
</span></span><span class=line><span class=cl>zsh-users/zsh-completions kind:fpath path:src  # 增强命令补全
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># zephyr 套件补全 zsh 的默认配置
</span></span><span class=line><span class=cl>mattmc3/zephyr path:plugins/color       # 色彩相关
</span></span><span class=line><span class=cl>mattmc3/zephyr path:plugins/directory   # 目录操作
</span></span><span class=line><span class=cl>mattmc3/zephyr path:plugins/editor      # 编辑操作
</span></span><span class=line><span class=cl>mattmc3/zephyr path:plugins/environment # 环境变量相关
</span></span><span class=line><span class=cl>mattmc3/zephyr path:plugins/history     # 命令历史
</span></span><span class=line><span class=cl>mattmc3/zephyr path:plugins/utility     # 工具
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 集成 fzf 和 zoxide
</span></span><span class=line><span class=cl>ajeetdsouza/zoxide
</span></span><span class=line><span class=cl>Aloxaf/fzf-tab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># P10k 主题
</span></span><span class=line><span class=cl>romkatv/powerlevel10k
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 语法高亮和自动提示
</span></span><span class=line><span class=cl>zsh-users/zsh-autosuggestions                         # 自动提示
</span></span><span class=line><span class=cl>zsh-users/zsh-history-substring-search                # 历史搜索
</span></span><span class=line><span class=cl>zdharma-continuum/fast-syntax-highlighting kind:defer # 语法高亮 (延迟加载)</span></span></code></pre></div></div><p>然后打开配置文件 <code>.zshrc</code> 目录, 添加插件配置项:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># P10k 即时提示</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> -r <span class=s2>&#34;</span><span class=si>${</span><span class=nv>XDG_CACHE_HOME</span><span class=k>:-</span><span class=nv>$HOME</span><span class=p>/.cache</span><span class=si>}</span><span class=s2>/p10k-instant-prompt-</span><span class=si>${</span><span class=p>(%)</span><span class=k>:-</span><span class=p>%n</span><span class=si>}</span><span class=s2>.zsh&#34;</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>source</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>XDG_CACHE_HOME</span><span class=k>:-</span><span class=nv>$HOME</span><span class=p>/.cache</span><span class=si>}</span><span class=s2>/p10k-instant-prompt-</span><span class=si>${</span><span class=p>(%)</span><span class=k>:-</span><span class=p>%n</span><span class=si>}</span><span class=s2>.zsh&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ez-compinit配置: 开启补全系统缓存</span>
</span></span><span class=line><span class=cl><span class=c1># 路径优先级 $ZSH_COMPDUMP &gt; $XDG_CACHE_HOME/zsh/zcompdump &gt; ~/.cache/zsh/zcompdump</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:plugin:ez-compinit&#39;</span> <span class=s1>&#39;use-cache&#39;</span> <span class=s1>&#39;yes&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ez-compinit配置: 使用oh-my-zsh 风格的补全</span>
</span></span><span class=line><span class=cl><span class=c1># 官方提供 styles: gremlin, ohmy, prez, zshzoo</span>
</span></span><span class=line><span class=cl><span class=c1># 只有 ohmy 预设与 fzf-tab 兼容, 其它模式 group 标题会有无法渲染的占位符</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:plugin:ez-compinit&#39;</span> <span class=s1>&#39;compstyle&#39;</span> <span class=s1>&#39;ohmy&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># zephyr配置: 启用和关闭一些 editor 预设功能</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:zephyr:plugin:editor&#39;</span> <span class=s1>&#39;prepend-sudo&#39;</span> yes <span class=c1># 快捷键加 sudo 功能</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:zephyr:plugin:editor&#39;</span> <span class=s1>&#39;pound-toggle&#39;</span> no  <span class=c1># 空格后显示别名原始形态</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:zephyr:plugin:editor&#39;</span> <span class=s1>&#39;magic-enter&#39;</span> no   <span class=c1># 回车自动执行 ls 或 git 命令</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 配合 fzf-tab 相关补全选项</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:completion:*:git-checkout:*&#39;</span> sort <span class=nb>false</span>   <span class=c1># git-checkout 关闭按字母排序</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:completion:*:descriptions&#39;</span> format <span class=s1>&#39;[%d]&#39;</span>  <span class=c1># 窗口增加 group 标题</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># fzf-tab 内部配置</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:fzf-tab:*&#39;</span> fzf-flags --bind<span class=o>=</span>tab:accept                               <span class=c1># 使用 Tab 键确认 fzf-tab 中的选项</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:fzf-tab:complete:cd:*&#39;</span> fzf-preview <span class=s1>&#39;eza -1 --color=always $realpath&#39;</span> <span class=c1># 在 cd 界面使用 eza 显示目录内容</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># --- Antidote 启动部分 ---</span>
</span></span><span class=line><span class=cl><span class=c1># 官方推荐的高性能启动方式</span>
</span></span><span class=line><span class=cl><span class=nv>zsh_plugins</span><span class=o>=</span><span class=si>${</span><span class=nv>ZDOTDIR</span><span class=k>:-</span><span class=p>~</span><span class=si>}</span>/.zsh_plugins
</span></span><span class=line><span class=cl><span class=o>[[</span> -f <span class=si>${</span><span class=nv>zsh_plugins</span><span class=si>}</span>.txt <span class=o>]]</span> <span class=o>||</span> touch <span class=si>${</span><span class=nv>zsh_plugins</span><span class=si>}</span>.txt
</span></span><span class=line><span class=cl><span class=nv>fpath</span><span class=o>=(</span>/usr/share/zsh-antidote/functions <span class=nv>$fpath</span><span class=o>)</span>
</span></span><span class=line><span class=cl>autoload -Uz antidote
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> ! <span class=si>${</span><span class=nv>zsh_plugins</span><span class=si>}</span>.zsh -nt <span class=si>${</span><span class=nv>zsh_plugins</span><span class=si>}</span>.txt <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  antidote bundle &lt;<span class=si>${</span><span class=nv>zsh_plugins</span><span class=si>}</span>.txt &gt;<span class=p>|</span><span class=si>${</span><span class=nv>zsh_plugins</span><span class=si>}</span>.zsh
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=nb>source</span> <span class=si>${</span><span class=nv>zsh_plugins</span><span class=si>}</span>.zsh
</span></span><span class=line><span class=cl><span class=c1># --- Antidote 启动结束 ---</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 启动 P10k 主题</span>
</span></span><span class=line><span class=cl><span class=o>[[</span> ! -f ~/.p10k.zsh <span class=o>]]</span> <span class=o>||</span> <span class=nb>source</span> ~/.p10k.zsh
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 启动fzf-tab</span>
</span></span><span class=line><span class=cl>enable-fzf-tab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 修复 zephyr-directory 预设与补全系统的问题</span>
</span></span><span class=line><span class=cl><span class=c1># 防止操作目录命令的 Tab 选项中出现隐藏文件</span>
</span></span><span class=line><span class=cl>unsetopt glob_dots
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 去掉 zephyr-editor 修改光标样式功能并恢复终端默认形态</span>
</span></span><span class=line><span class=cl><span class=k>function</span> update-cursor-style <span class=o>{</span> : <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=nb>printf</span> <span class=s1>&#39;\e[0 q&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># --- 快捷键绑定 ---</span>
</span></span><span class=line><span class=cl><span class=c1># 绑定 Alt + S 为命令前增加 sudo</span>
</span></span><span class=line><span class=cl>bindkey <span class=s1>&#39;\es&#39;</span> prepend-sudo
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 配置 zsh-history-substring-search 快捷键</span>
</span></span><span class=line><span class=cl>bindkey <span class=s1>&#39;^[[A&#39;</span>   history-substring-search-up    2&gt;/dev/null <span class=c1># &#39;^[[A&#39; 序列的上方向键</span>
</span></span><span class=line><span class=cl>bindkey <span class=s1>&#39;^[OA&#39;</span>   history-substring-search-up    2&gt;/dev/null <span class=c1># &#39;^[[A&#39; 序列的上方向键</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>bindkey <span class=s1>&#39;^[[B&#39;</span>   history-substring-search-down  2&gt;/dev/null <span class=c1># &#39;^[[B&#39; 序列的下方向键</span>
</span></span><span class=line><span class=cl>bindkey <span class=s1>&#39;^[OB&#39;</span>   history-substring-search-down  2&gt;/dev/null <span class=c1># &#39;^[OB&#39; 序列的下方向键</span></span></span></code></pre></div></div><p>其中顶部和底部 P10k 主题的配置稍后启动时 P10k 会自动添加.</p><p>之后下载一些系统工具:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>yay -S eza fzf zoxide</span></span></code></pre></div></div><p><code>eza</code> 可以代替 <code>ls</code> , <code>fzf</code> 是一个快速的搜索软件, <code>zoxide</code> 可以根据模糊名称智能跳转目录.</p><p>之后进入 Zsh 终端</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>zsh</span></span></code></pre></div></div><p>启动时 Antidote 会从 GitHub 下载插件, 等插件加载好, 第一次进入会有 P10k 的主题选项, 选择自己喜欢的主题配置即可进入.</p><p>进入 Shell 之后, 可以进一步加快速度, 由于 <code>fzf-tab</code> 插件需要渲染颜色, 如果渲染量很大, 使用内部 Zsh 脚本渲染会很慢, 所以可以编译 C 版本的渲染模块加速 <code>fzf-tab</code> 界面, 执行以下命令:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>build-fzf-tab-module</span></span></code></pre></div></div><p>之后重启 Zsh 即可看到渲染大量颜色时 <code>fzf-tab</code> 速度会有明显提升.</p><p>所有插件配置完成可以测试对比一下 Fish 和 Zsh 的速度:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>&gt; <span class=k>for</span> i in <span class=o>{</span>1..10<span class=o>}</span><span class=p>;</span> <span class=k>do</span> <span class=nb>time</span> zsh -lic exit<span class=p>;</span> <span class=k>done</span>
</span></span><span class=line><span class=cl>zsh -lic <span class=nb>exit</span>  0.04s user 0.02s system 108% cpu 0.057 total
</span></span><span class=line><span class=cl>zsh -lic <span class=nb>exit</span>  0.05s user 0.04s system 113% cpu 0.080 total
</span></span><span class=line><span class=cl>zsh -lic <span class=nb>exit</span>  0.06s user 0.05s system 112% cpu 0.092 total
</span></span><span class=line><span class=cl>zsh -lic <span class=nb>exit</span>  0.06s user 0.05s system 116% cpu 0.097 total
</span></span><span class=line><span class=cl>zsh -lic <span class=nb>exit</span>  0.06s user 0.05s system 115% cpu 0.088 total
</span></span><span class=line><span class=cl>zsh -lic <span class=nb>exit</span>  0.07s user 0.05s system 116% cpu 0.102 total
</span></span><span class=line><span class=cl>zsh -lic <span class=nb>exit</span>  0.06s user 0.05s system 115% cpu 0.095 total
</span></span><span class=line><span class=cl>zsh -lic <span class=nb>exit</span>  0.06s user 0.05s system 116% cpu 0.090 total
</span></span><span class=line><span class=cl>zsh -lic <span class=nb>exit</span>  0.06s user 0.05s system 116% cpu 0.097 total
</span></span><span class=line><span class=cl>zsh -lic <span class=nb>exit</span>  0.05s user 0.05s system 113% cpu 0.089 total</span></span></code></pre></div></div><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>&gt; <span class=k>for</span> i in <span class=o>{</span>1..10<span class=o>}</span><span class=p>;</span> <span class=k>do</span> <span class=nb>time</span> fish -lic exit<span class=p>;</span> <span class=k>done</span>
</span></span><span class=line><span class=cl>fish -lic <span class=nb>exit</span>  0.01s user 0.01s system 102% cpu 0.012 total
</span></span><span class=line><span class=cl>fish -lic <span class=nb>exit</span>  0.01s user 0.01s system 104% cpu 0.016 total
</span></span><span class=line><span class=cl>fish -lic <span class=nb>exit</span>  0.00s user 0.00s system 105% cpu 0.009 total
</span></span><span class=line><span class=cl>fish -lic <span class=nb>exit</span>  0.01s user 0.00s system 101% cpu 0.015 total
</span></span><span class=line><span class=cl>fish -lic <span class=nb>exit</span>  0.02s user 0.01s system 103% cpu 0.026 total
</span></span><span class=line><span class=cl>fish -lic <span class=nb>exit</span>  0.01s user 0.01s system 102% cpu 0.012 total
</span></span><span class=line><span class=cl>fish -lic <span class=nb>exit</span>  0.02s user 0.00s system 105% cpu 0.021 total
</span></span><span class=line><span class=cl>fish -lic <span class=nb>exit</span>  0.02s user 0.01s system 103% cpu 0.028 total
</span></span><span class=line><span class=cl>fish -lic <span class=nb>exit</span>  0.01s user 0.01s system 101% cpu 0.024 total
</span></span><span class=line><span class=cl>fish -lic <span class=nb>exit</span>  0.02s user 0.01s system 104% cpu 0.025 total</span></span></code></pre></div></div><p>可以看到速度还是不错的, 虽然比不上 Fish 的速度, 但都在 100ms 以下.</p><h2 class="relative group">安装输入法<div id=安装输入法 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e5%ae%89%e8%a3%85%e8%be%93%e5%85%a5%e6%b3%95 aria-label=锚点>#</a></span></h2><p>这里使用 Fcitx5-Rime 输入法.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo pacman -S fcitx5-im fcitx5-rime</span></span></code></pre></div></div><p><code>/etc/environment</code>中添加以下环境变量</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>XMODIFIERS=@im=fcitx</span></span></code></pre></div></div><p>接下来安装雾凇拼音项目, 支持全拼和多种双拼方案, 采用 ArchLinuxCN 版本加快国内下载速度</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>yay -S archlinuxcn/rime-ice-git</span></span></code></pre></div></div><p>下载后会将配置文件添加到 <code>/usr/share/rime-data</code> 下, 这里是 <code>fcitx5-rime</code> 的默认配置文件路径之一, 之后在用户路径下编写配置引用和修改其中的一些配置, 在 <code>~/.local/share/fcitx5/rime/</code> 下创建文件 <code>default.custom.yaml</code> , 写入以下内容:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>patch:
</span></span><span class=line><span class=cl>  # 导入雾凇拼音默认方案
</span></span><span class=line><span class=cl>  # rime_ice_suggestion 为雾凇方案的默认预设
</span></span><span class=line><span class=cl>  __include: rime_ice_suggestion:/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  schema_list:
</span></span><span class=line><span class=cl>    - schema: double_pinyin_flypy    # 小鹤双拼
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  menu/page_size: 8  # 候选词个数
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  # 覆盖方案选单快捷键, 防止与 VS Code 快捷键冲突
</span></span><span class=line><span class=cl>  switcher/hotkeys:
</span></span><span class=line><span class=cl>    - F4
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  # 修改中英切换相关快捷键逻辑
</span></span><span class=line><span class=cl>  # 切换中英：
</span></span><span class=line><span class=cl>  # 不同的选项表示：打字打到一半时按下了 CapsLock、Shift、Control 后：
</span></span><span class=line><span class=cl>  # commit_code  上屏原始的编码，然后切换到英文
</span></span><span class=line><span class=cl>  # commit_text  上屏拼出的词句，然后切换到英文
</span></span><span class=line><span class=cl>  # clear        清除未上屏内容，然后切换到英文
</span></span><span class=line><span class=cl>  # inline_ascii 切换到临时英文模式，按回车上屏后回到中文状态
</span></span><span class=line><span class=cl>  # noop         屏蔽快捷键，不切换中英，但不要屏蔽 CapsLock
</span></span><span class=line><span class=cl>  ascii_composer/switch_key:
</span></span><span class=line><span class=cl>      Caps_Lock: commit_text  # commit_code | commit_text | clear
</span></span><span class=line><span class=cl>      Shift_L: noop           # commit_code | commit_text | inline_ascii | clear | noop
</span></span><span class=line><span class=cl>      Shift_R: noop           # commit_code | commit_text | inline_ascii | clear | noop
</span></span><span class=line><span class=cl>      Control_L: noop         # commit_code | commit_text | inline_ascii | clear | noop
</span></span><span class=line><span class=cl>      Control_R: noop         # commit_code | commit_text | inline_ascii | clear | noop</span></span></code></pre></div></div><p><code>default.custom.yaml</code> 含义为修改默认配置, <code>__include: rime_ice_suggestion:/</code> 导入了配置, 在下面可以覆盖配置中的一些键值.</p><p>同样也可以修改其它文件, 比如要针对小鹤双拼 <code>double_pinyin_flypy.schema.yaml</code> 方案单独修改, 可以创建文件 <code>double_pinyin_flypy.custom.yaml</code> 来修改, 如下为修改输入法默认英文标点.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>patch:
</span></span><span class=line><span class=cl>  # 修改默认英文标点
</span></span><span class=line><span class=cl>  # reset: 默认状态。注释掉后，切换窗口时不会重置到默认状态。
</span></span><span class=line><span class=cl>  # states: 方案选单显示的名称。可以注释掉，仍可以通过快捷键切换。
</span></span><span class=line><span class=cl>  # abbrev: 默认的缩写取 states 的第一个字符，abbrev 可自定义一个字符
</span></span><span class=line><span class=cl>  switches:
</span></span><span class=line><span class=cl>    - name: ascii_mode
</span></span><span class=line><span class=cl>      states: [ 中, Ａ ]
</span></span><span class=line><span class=cl>    - name: ascii_punct  # 中英标点
</span></span><span class=line><span class=cl>      states: [ ¥, $ ]
</span></span><span class=line><span class=cl>      reset: 1
</span></span><span class=line><span class=cl>    - name: traditionalization
</span></span><span class=line><span class=cl>      states: [ 简, 繁 ]
</span></span><span class=line><span class=cl>    - name: emoji
</span></span><span class=line><span class=cl>      states: [ 💀, 😄 ]
</span></span><span class=line><span class=cl>      reset: 1
</span></span><span class=line><span class=cl>    - name: full_shape
</span></span><span class=line><span class=cl>      states: [ 半角, 全角 ]
</span></span><span class=line><span class=cl>    - name: search_single_char  # search.lua 的功能开关，辅码查词时是否单字优先
</span></span><span class=line><span class=cl>      states: [正常, 单字]
</span></span><span class=line><span class=cl>      abbrev: [词, 单]</span></span></code></pre></div></div><p>具体配置覆盖语法为:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>patch:
</span></span><span class=line><span class=cl>  &#34;一级设定项/二级设定项/三级设定项&#34;: 新的设定值
</span></span><span class=line><span class=cl>  &#34;另一个设定项&#34;: 新的设定值
</span></span><span class=line><span class=cl>  &#34;再一个设定项&#34;: 新的设定值
</span></span><span class=line><span class=cl>  &#34;含列表的设定项/@n&#34;: 列表第n个元素新的设定值，从0开始计数
</span></span><span class=line><span class=cl>  &#34;含列表的设定项/@last&#34;: 列表最后一个元素新的设定值
</span></span><span class=line><span class=cl>  &#34;含列表的设定项/@before 0&#34;: 在列表第一个元素之前插入新的设定值（不建议在补靪中使用）
</span></span><span class=line><span class=cl>  &#34;含列表的设定项/@after last&#34;: 在列表最后一个元素之后插入新的设定值（不建议在补靪中使用）
</span></span><span class=line><span class=cl>  &#34;含列表的设定项/@next&#34;: 在列表最后一个元素之后插入新的设定值（不建议在补靪中使用）
</span></span><span class=line><span class=cl>  &#34;含列表的设定项/+&#34;: 与列表合并的设定值（必须为列表）
</span></span><span class=line><span class=cl>  &#34;含字典的设定项/+&#34;: 与字典合并的设定值（必须为字典，注意YAML字典的无序性）</span></span></code></pre></div></div><p>然后点击托盘图标重新部署, 之后推荐在 fcitx5 配置界面中删除所有全局快捷键避免与 niri 冲突, 然后配置自己需要的快捷键.</p><p>用户目录 <code>~/.local/share/fcitx5/rime/</code> 下有 <code>installation.yaml</code> , 这是同步相关配置的文件, 需要关注以下几个键值.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl># 本机的 ID 标志, 默认是一串 UUID
</span></span><span class=line><span class=cl># 同步目录本机生成的文件夹是这个名字, 可以改成更好识别的名称
</span></span><span class=line><span class=cl>installation_id: &#34;Arch-001&#34;
</span></span><span class=line><span class=cl># 同步的路径, 如果不配置, 默认是当前配置目录下的 `sync/`
</span></span><span class=line><span class=cl>sync_dir: &#34;/file/path/sync&#34;</span></span></code></pre></div></div><p>点击托盘的同步按钮后, rime 会先在同步目录中搜索并合并其它用户词典, 合并到本地, 然后重新生成本机最新版的用户词典到同步目录.</p><p>Linux 下 Rime 的外观被 Fcitx5 接管, 不像 Win 或者 MacOS 平台一样可以在 Rime 配置文件中定义外观, 需要在 Fcitx5 中配置.</p><p>运行 " Fcitx5 配置" 可以在 &ldquo;附加组件 -> 经典用户界面&rdquo; 中调整字体以及其它外观, 4K 分辨率 1.5 倍缩放下 12-14 比较好, 皮肤可以自行选择, 这里选择以下皮肤, yay 下载后就可以在界面中选择.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>yay -S fcitx5-skin-ori-git</span></span></code></pre></div></div><h2 class="relative group">安装终端文件浏览器<div id=安装终端文件浏览器 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e5%ae%89%e8%a3%85%e7%bb%88%e7%ab%af%e6%96%87%e4%bb%b6%e6%b5%8f%e8%a7%88%e5%99%a8 aria-label=锚点>#</a></span></h2><p>yazi 是一款终端中使用的文件浏览器.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yay -S yazi</span></span></code></pre></div></div><h2 class="relative group">安装 Visual Studio Code<div id=安装-visual-studio-code class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e5%ae%89%e8%a3%85-visual-studio-code aria-label=锚点>#</a></span></h2><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yay -S aur/visual-studio-code-bin</span></span></code></pre></div></div><p>Visual Studio Code 有很多不同版本, <code>extra/code</code> 是 Arch Linux 官方编译版本, <code>aur/vscodium</code> 是社区去除遥测的编译版本, 由于微软限制, 它们和 Visual Studio Code 使用不同插件市场, 从方便角度来看这里下载 <code>aur/visual-studio-code-bin</code> .</p><h2 class="relative group">安装微信<div id=安装微信 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e5%ae%89%e8%a3%85%e5%be%ae%e4%bf%a1 aria-label=锚点>#</a></span></h2><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>yay -S wechat</span></span></code></pre></div></div><p>实测到目前(2026-01-13)在 Wayland 下运行已经很完美了, 基本没什么问题.</p><h2 class="relative group">安装 Logseq<div id=安装-logseq class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e5%ae%89%e8%a3%85-logseq aria-label=锚点>#</a></span></h2><p>Logseq 是一个开源双链笔记应用.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>yay -S  aur/logseq-desktop-bin</span></span></code></pre></div></div><p>我安装了 Logseq journals calendar 插件和 bonofix 主题</p><h2 class="relative group">安装浏览器<div id=安装浏览器 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e5%ae%89%e8%a3%85%e6%b5%8f%e8%a7%88%e5%99%a8 aria-label=锚点>#</a></span></h2><p>EndeavourOS 应该是自带 Firefox 的, 可以登录配置, 也可以安装 Chrome 系浏览器.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>yay -S chromium</span></span></code></pre></div></div><p>这个是基于 Chrome 的开源内核的开源浏览器, 用起来和 Chrome 没什么不同.</p><p>安装 Firefox 和它的中文语言包, 避免每次更新 Firefo 自动切回英文:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>yay -S firefox firefox-i18n-zh-cn</span></span></code></pre></div></div><p>执行以下命令让 DMS 成为默认浏览器的选择者:</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>xdg-settings <span class=nb>set</span> default-web-browser dms-open.desktop</span></span></code></pre></div></div><p>如果报错<code>xdg-settings: $BROWSER is set and can't be changed with xdg-settings</code>, 那是 <code>/etc/environment</code>/<code>~/.profile</code>/<code>~/.bashrc</code> 或者其它的地方有<code>$BROWSER</code>环境变量已经被配置了, 一般新系统就是 EndeavourOS 默认在<code>/etc/environment</code>写入了<code>BROWSER=firefox</code>, 删除即可.</p><p>也可以配置为其它自己想要的浏览器.</p><p>删除之后需要重启才能去掉这个环境变量, 可以先在终端<code>unset BROWSER</code>然后执行.</p><h2 class="relative group">安装音乐软件<div id=安装音乐软件 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e5%ae%89%e8%a3%85%e9%9f%b3%e4%b9%90%e8%bd%af%e4%bb%b6 aria-label=锚点>#</a></span></h2><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>yay -S yesplaymusic</span></span></code></pre></div></div><p>YesPlayMusic 可以播放多平台音乐, 也可以登录网易云音乐账号.</p><h2 class="relative group">安装腾讯会议<div id=安装腾讯会议 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e5%ae%89%e8%a3%85%e8%85%be%e8%ae%af%e4%bc%9a%e8%ae%ae aria-label=锚点>#</a></span></h2><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>yay -S wemeet</span></span></code></pre></div></div><p>腾讯会议现在有原生 Wayland 版本了, 但是在 niri 下无法屏幕共享, 在 KDE 和 Gnome 下是可以的, 据说在 Hyprland 也可以, 如果有需要可以切换其它桌面使用, 或者使用 OBS 转接的方式共享屏幕, 可以自行搜索.</p><h2 class="relative group">安装 WPS<div id=安装-wps class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%e5%ae%89%e8%a3%85-wps aria-label=锚点>#</a></span></h2><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>yay -S wps-office-cn wps-office-mui-zh-cn ttf-wps-fonts freetype2-wps libtiff5 ttf-ms-fonts</span></span></code></pre></div></div><ul><li><code>freetype2-wps</code> 可以防止部分中文字体过粗.</li><li><code>libtiff5</code> 防止部分 PDF 无法打开或导出.</li><li><code>ttf-ms-fonts</code> 是微软字体, 防止 Win 下编写的文档字体显示错误.</li><li><code>cups</code>是通用 Unix 打印系统, 有打印需求可以装.</li></ul><p>WPS 在 Wayland 下不会遵循系统缩放, 可以通过配置环境变量 <code>QT_SCALE_FACTOR=1.5</code> 来让它强制缩放, 不过这样图标模糊, 有需要可以自行修改 WPS 启动文件.</p></div></div><script type=text/javascript src=/js/page.min.54b6f4371722649edbe871e431d8670d670878c22be8f36e229fe53cc9b786fe25a834def5e6de621f7a3e37b72bc8cd73839aa5ed907ed6cbd45cd3e1b0fa20.js integrity="sha512-VLb0NxciZJ7b6HHkMdhnDWcIeMIr6PNuIp/lPMm3hv4lqDTe9ebeYh96Pje3K8jNc4Oape2QftbL1FzT4bD6IA==" data-oid=views_posts/linux/ArchLinux安装配置.md data-oid-likes=likes_posts/linux/ArchLinux安装配置.md></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span class="flex flex-col"><a class="flex text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" href=/posts/rust/rust%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%92%8C%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5/><span class=leading-6><span class="inline-block rtl:rotate-180">&larr;</span>&ensp;Rust交叉编译和静态链接
</span></a><span class="ms-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2025-03-26T14:35:48+08:00>2025-03-26</time>
</span></span><span class="flex flex-col items-end"><a class="flex text-right text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" href=/posts/git%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/><span class=leading-6>Git 基本配置&ensp;<span class="inline-block rtl:rotate-180">&rarr;</span>
</span></a><span class="me-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2026-01-13T19:32:41+08:00>2026-01-13</time></span></span></div></div></footer></article><div id=scroll-to-top class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200"><a href=#the-top class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label=返回顶部 title=返回顶部>&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">© 2026 Lixp. <a href=http://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel=noreferrer>CC BY-SA 4.0</a></p><p class="text-xs text-neutral-500 dark:text-neutral-400">由 <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a> 强力驱动</p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh+sCQ0E53ghYrxgYqw+0GCRyIEpA=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500" data-url=https://golixp.github.io/><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=搜索 tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="关闭 (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>